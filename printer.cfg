[include mainsail.cfg]
[include stealthburner_leds.cfg]
[include macros.cfg]
[include fans.cfg]
[include steppers.cfg]
[include bedHeater.cfg]
[include nitehawk.cfg]
[include beacon.cfg]
[include filament_loading.cfg]
[include thermal_expansion_compensation.cfg]

[exclude_object]

[gcode_arcs]
resolution: 0.1

[save_variables]
filename: ~/printer_data/config/variables.txt

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_15001F000D50535556323420-if00
restart_method: command

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
min_temp: 0
max_temp: 100

[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[temperature_sensor Nitehawk]
sensor_type: temperature_mcu
sensor_mcu: nhk
max_temp: 100

[printer]
kinematics: corexy
max_velocity: 400
max_accel: 10000
max_z_velocity: 10
max_z_accel: 350
square_corner_velocity: 9.0

#####################################################################
#   Lighting
#####################################################################
[output_pin caselight]
pin: PD15
pwm:true
shutdown_value: 0
value:.01
cycle_time: 0.01

#####################################################################
#   Additional Sensors
#####################################################################
[temperature_sensor chamber_temp]
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: PF4
min_temp: 0
max_temp: 100
gcode_id: chamber_th

#####################################################################
#   Gantry Adjustment and Bed Mesh
#####################################################################
[idle_timeout]
timeout: 1800

[z_tilt]
z_positions:
   -50, 18
   150, 348
   350, 18
points:
   30, 5
   150, 245
   270, 5
speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075

[bed_mesh]
speed: 350
horizontal_move_z: 2
mesh_min: 20, 28 # Beacon Y Offset: 28
mesh_max: 280, 276
fade_start: 0.6
fade_end: 10.0
probe_count: 25, 25
algorithm: bicubic
zero_reference_position: 150, 150

########################################
# EXP1 / EXP2 (display) pins
########################################
[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,    # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,      # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=<5V>

########################################
# Input Shaping
########################################
[input_shaper]
shaper_type_x: mzv
shaper_freq_x: 75.2
damping_ratio_x: 0.047
shaper_type_y: mzv
shaper_freq_y: 45.4
damping_ratio_y: 0.048

########################################
# Shake N' Tune
########################################
[shaketune]
show_macros_in_webui: True
number_of_results_to_keep: 10

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 59.874
#*# pid_ki = 3.272
#*# pid_kd = 273.922
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.658
#*# pid_ki = 3.110
#*# pid_kd = 52.922
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.060068, -0.045302, -0.039161, -0.030897, -0.020371, -0.008866, -0.000008, 0.005965, 0.013276, 0.019356, 0.021822, 0.019833, 0.017668, 0.020930, 0.024987, 0.023960, 0.017679, 0.009969, 0.003969, -0.002072, -0.012438, -0.030162, -0.048416, -0.060761, -0.088372
#*# 	-0.056181, -0.042520, -0.034470, -0.025198, -0.014064, -0.003058, 0.006030, 0.012445, 0.020342, 0.025992, 0.028010, 0.025229, 0.024630, 0.029625, 0.033930, 0.031845, 0.025544, 0.017175, 0.011879, 0.005498, -0.006455, -0.024276, -0.041205, -0.052680, -0.080229
#*# 	-0.063774, -0.049675, -0.041414, -0.030587, -0.017581, -0.006452, 0.002930, 0.009983, 0.017275, 0.022491, 0.024569, 0.021302, 0.019559, 0.025020, 0.030192, 0.027739, 0.021019, 0.013663, 0.007614, 0.000586, -0.011563, -0.028674, -0.045106, -0.057801, -0.080848
#*# 	-0.067559, -0.053535, -0.043439, -0.031818, -0.018186, -0.006978, 0.002027, 0.010260, 0.018290, 0.024126, 0.027285, 0.024263, 0.022278, 0.027103, 0.031668, 0.030262, 0.022692, 0.014853, 0.007738, 0.001169, -0.011162, -0.027382, -0.043900, -0.057293, -0.080502
#*# 	-0.067793, -0.054964, -0.043719, -0.032473, -0.018727, -0.007870, 0.000731, 0.009577, 0.018594, 0.026040, 0.029363, 0.026939, 0.025142, 0.029367, 0.033386, 0.030444, 0.023280, 0.015252, 0.008467, 0.002467, -0.009843, -0.025968, -0.043209, -0.055809, -0.079322
#*# 	-0.069818, -0.056497, -0.046309, -0.036335, -0.024191, -0.013521, -0.004358, 0.004367, 0.012990, 0.020384, 0.024689, 0.022894, 0.021000, 0.025757, 0.029771, 0.026525, 0.017406, 0.011574, 0.006319, -0.000298, -0.012080, -0.028134, -0.046841, -0.061038, -0.083941
#*# 	-0.076122, -0.060775, -0.051186, -0.039362, -0.026544, -0.016169, -0.007742, 0.000811, 0.007956, 0.013615, 0.017300, 0.015384, 0.013068, 0.019475, 0.025863, 0.022863, 0.014523, 0.008388, 0.004095, -0.002446, -0.013928, -0.030446, -0.050246, -0.065238, -0.086432
#*# 	-0.076902, -0.061713, -0.051876, -0.036775, -0.023068, -0.012713, -0.004155, 0.003900, 0.010352, 0.013860, 0.016431, 0.013706, 0.012669, 0.018972, 0.024814, 0.022487, 0.015114, 0.007408, 0.002953, -0.003650, -0.014628, -0.032079, -0.050931, -0.066470, -0.087062
#*# 	-0.078235, -0.064556, -0.053176, -0.039022, -0.024316, -0.012762, -0.002651, 0.003948, 0.009759, 0.011647, 0.012534, 0.010551, 0.009379, 0.016057, 0.022282, 0.019380, 0.011025, 0.003114, -0.003289, -0.009518, -0.021774, -0.038903, -0.058430, -0.073620, -0.094148
#*# 	-0.082202, -0.069592, -0.059941, -0.044711, -0.029646, -0.017931, -0.009732, -0.003507, 0.000120, 0.002527, 0.003163, -0.000023, -0.000499, 0.005581, 0.012337, 0.008324, -0.001087, -0.009267, -0.014850, -0.020884, -0.033055, -0.051641, -0.072520, -0.088231, -0.106919
#*# 	-0.082939, -0.070106, -0.058761, -0.043870, -0.029136, -0.018766, -0.010477, -0.004665, 0.000417, 0.003525, 0.002936, -0.000183, -0.001372, 0.004091, 0.009519, 0.004431, -0.006107, -0.013386, -0.019364, -0.025980, -0.039185, -0.058345, -0.079134, -0.094993, -0.113486
#*# 	-0.077350, -0.064515, -0.053142, -0.040153, -0.025905, -0.016266, -0.009746, -0.001620, 0.003969, 0.007047, 0.007362, 0.003157, 0.000795, 0.005362, 0.010621, 0.007260, -0.002996, -0.011459, -0.017988, -0.024836, -0.038932, -0.059959, -0.082391, -0.096722, -0.114171
#*# 	-0.074626, -0.063515, -0.054179, -0.040693, -0.026363, -0.015930, -0.009416, -0.003411, 0.002648, 0.006253, 0.007554, 0.001918, -0.001545, 0.003198, 0.008456, 0.004662, -0.004435, -0.014721, -0.021702, -0.030514, -0.044088, -0.064686, -0.087824, -0.100983, -0.118507
#*# 	-0.079677, -0.068157, -0.060504, -0.048263, -0.033105, -0.022950, -0.016882, -0.009909, -0.002724, 0.002185, 0.002438, -0.003978, -0.008747, -0.004600, 0.000250, -0.002905, -0.013183, -0.022429, -0.030444, -0.038502, -0.051640, -0.072542, -0.094437, -0.107775, -0.128231
#*# 	-0.082027, -0.071722, -0.063148, -0.051541, -0.037376, -0.026792, -0.019442, -0.012446, -0.004322, -0.000203, 0.000191, -0.005030, -0.009254, -0.006334, -0.003565, -0.007676, -0.016955, -0.026215, -0.033459, -0.041370, -0.053891, -0.073431, -0.094168, -0.109790, -0.131746
#*# 	-0.079917, -0.071823, -0.063547, -0.052560, -0.038998, -0.026996, -0.019586, -0.013306, -0.007649, -0.002898, -0.000389, -0.005468, -0.009682, -0.008584, -0.006488, -0.010418, -0.020869, -0.031832, -0.039278, -0.044156, -0.056690, -0.076267, -0.097051, -0.112313, -0.133994
#*# 	-0.073159, -0.067264, -0.061615, -0.051304, -0.036735, -0.024847, -0.016516, -0.010731, -0.005948, -0.001958, 0.000781, -0.003236, -0.008405, -0.007438, -0.003823, -0.009590, -0.021125, -0.033096, -0.040983, -0.047811, -0.061920, -0.081061, -0.101522, -0.117124, -0.139260
#*# 	-0.065058, -0.059783, -0.056870, -0.047549, -0.033074, -0.020522, -0.013102, -0.009028, -0.003682, 0.000328, 0.002238, -0.000298, -0.004025, -0.003412, 0.000769, -0.003021, -0.016419, -0.028849, -0.036873, -0.044028, -0.059176, -0.078725, -0.098513, -0.114104, -0.134940
#*# 	-0.065016, -0.058278, -0.053834, -0.045271, -0.031517, -0.021117, -0.015143, -0.011453, -0.006343, -0.001241, 0.001517, -0.001612, -0.003853, -0.001844, 0.001095, -0.004845, -0.018044, -0.029329, -0.035606, -0.043055, -0.057708, -0.078039, -0.097879, -0.112959, -0.133891
#*# 	-0.077106, -0.070233, -0.065026, -0.057718, -0.043754, -0.034427, -0.028934, -0.025440, -0.020595, -0.014660, -0.011746, -0.013202, -0.015387, -0.012610, -0.010280, -0.017223, -0.028549, -0.038130, -0.045122, -0.053424, -0.067429, -0.086639, -0.105619, -0.119235, -0.140506
#*# 	-0.080089, -0.073344, -0.069236, -0.062348, -0.049819, -0.040676, -0.034694, -0.031700, -0.026169, -0.019996, -0.015746, -0.017303, -0.018573, -0.014536, -0.011321, -0.017703, -0.029014, -0.037629, -0.045510, -0.053566, -0.066113, -0.083953, -0.103448, -0.117351, -0.138572
#*# 	-0.078260, -0.072399, -0.068693, -0.062034, -0.049529, -0.041298, -0.035773, -0.029652, -0.024624, -0.018589, -0.015186, -0.016990, -0.018936, -0.013319, -0.011025, -0.015174, -0.025225, -0.034218, -0.043019, -0.050657, -0.063704, -0.081429, -0.098937, -0.111817, -0.131843
#*# 	-0.087025, -0.080062, -0.076448, -0.068679, -0.057608, -0.049715, -0.042987, -0.036787, -0.031855, -0.026084, -0.024347, -0.028727, -0.029179, -0.023787, -0.019808, -0.023849, -0.033794, -0.042101, -0.050904, -0.061246, -0.072780, -0.088608, -0.105790, -0.118629, -0.138871
#*# 	-0.099021, -0.093995, -0.088861, -0.081510, -0.070222, -0.063910, -0.055593, -0.050034, -0.045362, -0.040459, -0.039576, -0.042934, -0.042211, -0.034813, -0.030384, -0.033922, -0.041629, -0.049567, -0.057488, -0.068281, -0.078885, -0.094040, -0.112143, -0.125451, -0.146444
#*# 	-0.119685, -0.115235, -0.110854, -0.101684, -0.092395, -0.087936, -0.076461, -0.069872, -0.065191, -0.060103, -0.057485, -0.062670, -0.060980, -0.050907, -0.045649, -0.047713, -0.054985, -0.061879, -0.072999, -0.079246, -0.090031, -0.105272, -0.123368, -0.135470, -0.152544
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 290.0
#*# min_y = 28.0
#*# max_y = 280.0
#*#
#*# [beacon model default]
#*# model_coef = 1.6110036478434484,
#*# 	  1.973982558091687,
#*# 	  0.8321247087429255,
#*# 	  0.40697722038889755,
#*# 	  0.1481924117154152,
#*# 	  -0.08191018917521063,
#*# 	  -0.11033168321211512,
#*# 	  0.09794361400804781,
#*# 	  0.1191712397573968,
#*# 	  0.005814020603224393
#*# model_domain = 1.8804822193651414e-07,1.9384666409515854e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 69.758810
#*# model_offset = 0.00000
#*#
#*# [beacon model glacier]
#*# model_coef = 1.5733818718859267,
#*# 	1.948531241627832,
#*# 	0.8174183694894313,
#*# 	0.2728724277947962,
#*# 	0.0819235979223551,
#*# 	0.19958884996708198,
#*# 	0.06843189302096309,
#*# 	-0.10503503508047295,
#*# 	0.05933656529324594,
#*# 	0.08754882511351811
#*# model_domain = 1.8662807221649902e-07,1.9373932772891537e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 59.496354
#*# model_offset = -0.08500
#*#
#*# [beacon model texture_pei]
#*# model_coef = 1.6509437967768743,
#*# 	2.0512291801235913,
#*# 	0.8733851884049029,
#*# 	0.29036362426318957,
#*# 	-0.09493423392859202,
#*# 	-0.05854157171703409,
#*# 	0.15148673392155682,
#*# 	0.12911492525429033,
#*# 	0.017864428852821468,
#*# 	-0.010408475695782331
#*# model_domain = 1.8784716894380083e-07,1.9376999320931266e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 28.638638
#*# model_offset = 0.00000

[include mainsail.cfg]
[include timelapse.cfg]
[include stealthburner_leds.cfg]
[include macros.cfg]
[include fans.cfg]
[include steppers.cfg]
[include bedHeater.cfg]
[include nitehawk.cfg]
[include beacon.cfg]
[include filament_loading.cfg]
[include thermal_expansion_compensation.cfg]
[include KAMP_Settings.cfg]

[exclude_object]
[firmware_retraction]
[gcode_arcs]
resolution: 0.1

[save_variables]
filename: ~/printer_data/config/variables.txt

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_15001F000D50535556323420-if00
restart_method: command

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
min_temp: 0
max_temp: 100

[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[temperature_sensor Nitehawk]
sensor_type: temperature_mcu
sensor_mcu: nhk
max_temp: 100

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 10000
max_z_velocity: 10
max_z_accel: 350
square_corner_velocity: 10.0

#####################################################################
#   Lighting
#####################################################################
[output_pin caselight]
pin: PA3
pwm:true
shutdown_value: 0
value:.01
cycle_time: 0.0005

#####################################################################
#   Chamber Sensors
#####################################################################
[temperature_sensor chamber_temp_a]
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: PF4
min_temp: 0
max_temp: 100
gcode_id: chamber_th_1

[temperature_sensor chamber_temp_b]
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: PF5
min_temp: 0
max_temp: 100
gcode_id: chamber_th_2

[temperature_sensor chamber_temp]
sensor_type: temperature_combined
sensor_list: temperature_sensor chamber_temp_a, temperature_sensor chamber_temp_b
combination_method: mean
maximum_deviation: 999.9

#####################################################################
#   Gantry Adjustment and Bed Mesh
#####################################################################
[idle_timeout]
timeout: 1800

[z_tilt]
z_positions:
   -50, 18
   150, 348
   350, 18
points:
   30, 5
   150, 245
   270, 5
speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075

[bed_mesh]
speed: 350
horizontal_move_z: 2
mesh_min: 20, 28 # Beacon Y Offset: 28
mesh_max: 280, 276
fade_start: 0.6
fade_end: 10.0
probe_count: 25, 25
algorithm: bicubic
zero_reference_position: 150, 150

########################################
# EXP1 / EXP2 (display) pins
########################################
[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,    # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,      # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=<5V>

########################################
# Input Shaping
########################################
[input_shaper]
shaper_type_x: ei
shaper_freq_x: 90.0
damping_ratio_x: 0.046
shaper_type_y: ei
shaper_freq_y: 52.8
damping_ratio_y: 0.046

########################################
# Shake N' Tune
########################################
[shaketune]
show_macros_in_webui: True
number_of_results_to_keep: 10

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 59.721
#*# pid_ki = 3.432
#*# pid_kd = 259.788
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.658
#*# pid_ki = 3.110
#*# pid_kd = 52.922
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.005976, 0.002397, 0.009394, 0.016621, 0.027359, 0.038067, 0.047123, 0.047345, 0.058543, 0.065150, 0.068521, 0.068242, 0.070258, 0.066794, 0.071374, 0.073396, 0.069391, 0.063331, 0.056380, 0.050316, 0.043810, 0.031259, 0.014166, -0.002179, -0.019230
#*# 	-0.011889, -0.000500, 0.007058, 0.009750, 0.026509, 0.037649, 0.047393, 0.053268, 0.060419, 0.066669, 0.070070, 0.068941, 0.066628, 0.068773, 0.074692, 0.076448, 0.078024, 0.065223, 0.058561, 0.053752, 0.045907, 0.030447, 0.017787, 0.001380, -0.010204
#*# 	-0.026193, -0.014049, -0.004909, 0.005214, 0.021184, 0.033603, 0.039199, 0.046461, 0.052587, 0.058907, 0.061493, 0.061301, 0.056910, 0.058990, 0.064963, 0.066992, 0.062281, 0.049905, 0.047985, 0.042873, 0.034230, 0.023450, 0.012114, -0.009388, -0.021198
#*# 	-0.039519, -0.026568, -0.016565, -0.006110, 0.007512, 0.020334, 0.034930, 0.036084, 0.043627, 0.051773, 0.054505, 0.049131, 0.051409, 0.053288, 0.057933, 0.060994, 0.056738, 0.048944, 0.041562, 0.035755, 0.028571, 0.016249, 0.001223, -0.011550, -0.024598
#*# 	-0.047114, -0.032701, -0.023361, -0.012531, 0.000021, 0.011618, 0.020558, 0.028959, 0.038054, 0.041574, 0.051160, 0.049964, 0.046662, 0.049011, 0.059024, 0.055163, 0.049654, 0.043095, 0.036387, 0.030601, 0.024141, 0.012549, -0.003285, -0.019355, -0.032070
#*# 	-0.051882, -0.043388, -0.029220, -0.019695, -0.007589, 0.002968, 0.012367, 0.021116, 0.029787, 0.037832, 0.043636, 0.043764, 0.040424, 0.048519, 0.053721, 0.048748, 0.043534, 0.037157, 0.027332, 0.023178, 0.019609, 0.008961, -0.006779, -0.025525, -0.038213
#*# 	-0.060511, -0.045941, -0.041011, -0.025484, -0.013572, -0.002760, 0.005695, 0.018582, 0.021318, 0.027245, 0.032638, 0.032799, 0.030594, 0.033553, 0.039443, 0.041559, 0.035948, 0.029689, 0.025528, 0.018285, 0.016040, 0.004713, -0.011854, -0.031734, -0.042044
#*# 	-0.069062, -0.055119, -0.044201, -0.028181, -0.018681, -0.007402, 0.001726, 0.010027, 0.017051, 0.022169, 0.024840, 0.024036, 0.022207, 0.026471, 0.033009, 0.035348, 0.031029, 0.024137, 0.019034, 0.015739, 0.009481, -0.001314, -0.018754, -0.036306, -0.049796
#*# 	-0.073073, -0.058365, -0.047794, -0.035267, -0.020534, -0.008553, 0.001589, 0.008825, 0.014710, 0.018141, 0.020771, 0.019437, 0.013719, 0.021171, 0.029007, 0.031601, 0.024646, 0.021588, 0.012718, 0.008770, 0.002155, -0.008475, -0.026471, -0.045041, -0.057606
#*# 	-0.077003, -0.065168, -0.053507, -0.039717, -0.025112, -0.013119, -0.002937, 0.002799, 0.007083, 0.010544, 0.011945, 0.013992, 0.009465, 0.012655, 0.019984, 0.022669, 0.012059, 0.008375, 0.002448, -0.001028, -0.008549, -0.020173, -0.039073, -0.058155, -0.071287
#*# 	-0.082140, -0.068312, -0.055398, -0.042461, -0.029633, -0.015548, -0.007139, -0.000953, 0.002867, 0.011143, 0.009934, 0.008534, 0.006826, 0.009105, 0.014540, 0.016738, 0.009894, 0.001564, -0.003861, -0.007846, -0.015685, -0.029209, -0.050472, -0.066270, -0.078734
#*# 	-0.079981, -0.061566, -0.053825, -0.040257, -0.025312, -0.015047, -0.010839, -0.001214, 0.003596, 0.009916, 0.012360, 0.010554, 0.007977, 0.010511, 0.016268, 0.018615, 0.011735, 0.003584, 0.000940, -0.003972, -0.015422, -0.030068, -0.049101, -0.067474, -0.082576
#*# 	-0.079148, -0.067186, -0.053214, -0.042896, -0.028151, -0.018161, -0.008781, -0.003122, 0.002975, 0.008410, 0.012396, 0.008717, 0.005186, 0.006826, 0.008987, 0.015835, 0.009976, 0.001060, -0.005154, -0.008173, -0.020276, -0.034760, -0.053256, -0.073929, -0.085828
#*# 	-0.083320, -0.072098, -0.062719, -0.049546, -0.034815, -0.022603, -0.014301, -0.007522, 0.001973, 0.006152, 0.009125, 0.006117, 0.000674, -0.001016, 0.004892, 0.009691, 0.003060, -0.004677, -0.011511, -0.017297, -0.027602, -0.040793, -0.060260, -0.079784, -0.092144
#*# 	-0.088458, -0.077168, -0.067581, -0.056003, -0.041433, -0.028357, -0.019895, -0.014754, -0.004931, 0.001690, 0.005299, 0.002400, 0.000842, -0.001656, 0.002139, 0.003949, -0.002699, -0.010011, -0.016814, -0.021610, -0.030843, -0.043099, -0.061964, -0.079790, -0.094583
#*# 	-0.086728, -0.076336, -0.068006, -0.059255, -0.042322, -0.028885, -0.019914, -0.012841, -0.005582, 0.000958, 0.005288, 0.003338, -0.000103, -0.000974, 0.002782, 0.002999, -0.000976, -0.012369, -0.020246, -0.023846, -0.030188, -0.042942, -0.061797, -0.080539, -0.092682
#*# 	-0.081757, -0.073635, -0.066961, -0.054968, -0.039054, -0.025520, -0.016234, -0.010071, -0.004880, 0.001131, 0.006535, 0.004901, 0.001300, 0.001163, 0.004951, 0.005009, -0.001990, -0.015383, -0.021381, -0.025386, -0.033950, -0.046727, -0.063370, -0.083325, -0.096205
#*# 	-0.070713, -0.064712, -0.059392, -0.050223, -0.033966, -0.019752, -0.008473, -0.005387, 0.000581, 0.005831, 0.011097, 0.009670, 0.005589, 0.006011, 0.010521, 0.012470, 0.005333, -0.006550, -0.015908, -0.021188, -0.030235, -0.043650, -0.062280, -0.080731, -0.093837
#*# 	-0.064514, -0.057796, -0.052316, -0.042448, -0.027912, -0.015024, -0.007611, -0.001959, 0.003749, 0.008714, 0.014909, 0.014297, 0.011370, 0.012483, 0.018420, 0.018841, 0.010800, -0.001230, -0.008652, -0.013669, -0.022182, -0.036511, -0.055393, -0.073079, -0.084637
#*# 	-0.073671, -0.066746, -0.059624, -0.050786, -0.035947, -0.023703, -0.016584, -0.011890, -0.006667, 0.000269, 0.005742, 0.006697, 0.005415, 0.009248, 0.013245, 0.011645, 0.004116, -0.005469, -0.013135, -0.018204, -0.027066, -0.040741, -0.058724, -0.075658, -0.086437
#*# 	-0.076287, -0.068629, -0.063258, -0.052621, -0.040155, -0.028660, -0.019872, -0.014682, -0.010705, -0.002452, 0.003440, 0.005542, 0.004081, 0.007616, 0.013022, 0.013203, 0.004650, -0.003854, -0.010068, -0.016670, -0.023781, -0.035090, -0.052094, -0.070028, -0.080433
#*# 	-0.068919, -0.061606, -0.055689, -0.047364, -0.035041, -0.024549, -0.016725, -0.011726, -0.004102, 0.002332, 0.009449, 0.010505, 0.009665, 0.014125, 0.019733, 0.020312, 0.014241, 0.005650, -0.002137, -0.007308, -0.015343, -0.027412, -0.042815, -0.058269, -0.069024
#*# 	-0.068607, -0.060380, -0.054424, -0.046553, -0.034622, -0.023487, -0.015988, -0.009018, -0.002529, 0.004118, 0.008820, 0.007849, 0.006254, 0.011391, 0.017664, 0.018828, 0.013248, 0.005361, -0.002399, -0.008868, -0.017116, -0.028086, -0.041833, -0.058617, -0.068681
#*# 	-0.075716, -0.067780, -0.060962, -0.051798, -0.041770, -0.031682, -0.022420, -0.016181, -0.010267, -0.002597, 0.001433, 0.001127, 0.000048, 0.006926, 0.013421, 0.015253, 0.010384, 0.004594, -0.002593, -0.008446, -0.016256, -0.027115, -0.041499, -0.057012, -0.068966
#*# 	-0.083406, -0.076871, -0.069518, -0.059979, -0.049074, -0.041699, -0.030072, -0.022733, -0.017459, -0.010496, -0.005429, -0.004957, -0.006480, 0.001854, 0.009250, 0.011632, 0.007847, 0.002891, -0.001292, -0.008648, -0.017030, -0.027934, -0.040877, -0.057586, -0.068396
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 280.0
#*# min_y = 28.0
#*# max_y = 276.0
#*#
#*# [beacon model default]
#*# model_coef = 1.6196653021596203,
#*# 	  1.9873464473329214,
#*# 	  0.828740116049422,
#*# 	  0.38489896626371894,
#*# 	  0.1711372126158457,
#*# 	  -0.023376553004923067,
#*# 	  -0.18521244358376815,
#*# 	  -0.007144107086545909,
#*# 	  0.16674348408793477,
#*# 	  0.06135469492230514
#*# model_domain = 1.8805568644820235e-07,1.9381214718523837e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 61.572092
#*# model_offset = 0.00000
#*#
#*# [beacon model glacier]
#*# model_coef = 1.5733818718859267,
#*# 	1.948531241627832,
#*# 	0.8174183694894313,
#*# 	0.2728724277947962,
#*# 	0.0819235979223551,
#*# 	0.19958884996708198,
#*# 	0.06843189302096309,
#*# 	-0.10503503508047295,
#*# 	0.05933656529324594,
#*# 	0.08754882511351811
#*# model_domain = 1.8662807221649902e-07,1.9373932772891537e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 59.496354
#*# model_offset = -0.08500
#*#
#*# [beacon model texture_pei]
#*# model_coef = 1.6509437967768743,
#*# 	2.0512291801235913,
#*# 	0.8733851884049029,
#*# 	0.29036362426318957,
#*# 	-0.09493423392859202,
#*# 	-0.05854157171703409,
#*# 	0.15148673392155682,
#*# 	0.12911492525429033,
#*# 	0.017864428852821468,
#*# 	-0.010408475695782331
#*# model_domain = 1.8784716894380083e-07,1.9376999320931266e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 28.638638
#*# model_offset = 0.00000
